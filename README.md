# RTMP → RTSP Конвертер

## Описание

Сервис для конвертации видеопотоков из формата RTMP в формат RTSP. Проект позволяет создавать, запускать и управлять потоками, а также предоставляет веб-интерфейс для мониторинга и администрирования.

## Технологии

### Бэкенд

- **Node.js** с **TypeScript**
- **Express** для REST API
- **MediaMTX** для приема и обработки медиапотоков
- **Winston** для логирования

### Фронтенд

- **React** с **TypeScript**
- **Vite** в качестве сборщика
- **Tailwind CSS** для стилизации
- **Radix UI** компоненты
- **React Player** для проигрывания видеопотоков

### Инфраструктура

- **Docker** и **Docker Compose** для контейнеризации
- **MediaMTX** в качестве RTMP/RTSP сервера
- **Supervisor** для управления процессами

## Структура проекта

```
./
├── backend/      # Серверная часть приложения (Node.js + Express)
├── frontend/     # Клиентская часть приложения (React + Vite)
├── shared/       # Общие типы и утилиты
├── .env          # Конфигурация окружения
├── Dockerfile    # Настройки контейнера
├── Makefile      # Утилиты для управления проектом
└── docker-compose.yml # Настройки контейнеризации
```

## Установка и запуск

### Через Docker (рекомендуется)

1. Клонируйте репозиторий:

   ```bash
   git clone <repository-url>
   cd sio-twitch
   ```

2. Запустите проект с помощью Docker Compose:

   ```bash
   make init
   ```

   Или вручную:

   ```bash
   docker compose build
   docker compose up -d
   ```

3. Откройте веб-интерфейс в браузере:
   ```
   http://localhost:4173
   ```

### Управление через Makefile

- `make build` - сборка контейнеров
- `make up` - запуск контейнеров
- `make down` - остановка контейнеров
- `make restart` - перезапуск контейнеров
- `make init` - полная инициализация (down + build + up)

## Порты и сервисы

- **3000**: REST API (backend)
- **4173**: Веб-интерфейс (frontend)
- **1935**: RTMP сервер
- **8554**: RTSP сервер
- **8888**: HLS
- **8889**: WebRTC
- **9997**: MediaMTX API

Порты конфигурируются в файле `.env`.

## Настройка OBS Studio

Для обеспечения оптимальной совместимости с MediaMTX и корректного отображения трансляции в веб-интерфейсе, рекомендуется использовать следующие настройки в OBS Studio:

1. В разделе **Настройки → Вывод**:
   - Выберите режим вывода: **Расширенный**
   - В настройках стрима установите кодировщик: **Software (x264)**
   - Рекомендуемый битрейт: **2500-3500 Kbps**
   - Установите интервал ключевых кадров: **2 секунды**
   - Используйте профиль: **Main**
   - Preset: **veryfast** или **faster**

2. В разделе **Настройки → Видео**:
   - Рекомендуемое разрешение вывода: **1280x720** или **1920x1080**
   - FPS: **30** или **60**

Эти настройки обеспечивают стабильную работу потока и предотвращают проблемы с воспроизведением HLS в приложении.

## Лицензия

ISC
